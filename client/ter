#!/usr/bin/env node

import fetch from 'node-fetch';

console.log('ğŸš€ Ø§Ø®ØªØ¨Ø§Ø± Ø³Ø±ÙŠØ¹ Ù„Ù„Ù€ Frontend...\n');

const quickTests = [
    {
        name: 'SPA Routing - Home',
        url: 'http://localhost:5173',
        type: 'routing'
    },
    {
        name: 'SPA Routing - Programs',
        url: 'http://localhost:5173/programs',
        type: 'routing'
    },
    {
        name: 'SPA Routing - Events',
        url: 'http://localhost:5173/events',
        type: 'routing'
    },
    {
        name: 'API Health Check',
        url: 'https://shababna-backend.onrender.com/api/health',
        type: 'api'
    },
    {
        name: 'API Events',
        url: 'https://shababna-backend.onrender.com/api/events',
        type: 'api'
    },
    {
        name: 'API Programs',
        url: 'https://shababna-backend.onrender.com/api/programs',
        type: 'api'
    }
];

async function quickTest() {
    let success = 0;
    let failed = 0;

    for (const test of quickTests) {
        try {
            const startTime = Date.now();
            const response = await fetch(test.url, {
                method: 'GET',
                timeout: test.type === 'api' ? 15000 : 10000
            });
            const endTime = Date.now();
            const responseTime = endTime - startTime;

            if (response.ok) {
                console.log(`âœ… ${test.name} (${responseTime}ms)`);
                success++;
            } else {
                console.log(`âŒ ${test.name} (Status: ${response.status})`);
                failed++;
            }
        } catch (error) {
            console.log(`âŒ ${test.name} (Error: ${error.message})`);
            failed++;
        }

        // Small delay
        await new Promise(resolve => setTimeout(resolve, 200));
    }

    console.log('\nğŸ“Š Ø§Ù„Ù†ØªØ§Ø¦Ø¬:');
    console.log(`âœ… Ù†Ø¬Ø­: ${success}`);
    console.log(`âŒ ÙØ´Ù„: ${failed}`);
    console.log(`ğŸ“ˆ Ù†Ø³Ø¨Ø© Ø§Ù„Ù†Ø¬Ø§Ø­: ${Math.round((success / (success + failed)) * 100)}%`);

    if (success === quickTests.length) {
        console.log('\nğŸ‰ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª Ù†Ø¬Ø­Øª!');
    } else {
        console.log('\nâš ï¸  Ø¨Ø¹Ø¶ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª ÙØ´Ù„Øª.');
    }
}

quickTest().catch(console.error);