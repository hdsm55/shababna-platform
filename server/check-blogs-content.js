import { query } from './config/database.js';

async function checkAndAddBlogs() {
    try {
        console.log('๐ ูุญุต ุฌุฏูู ุงููุฏููุฉ...');
        const result = await query('SELECT id, title, content, author, created_at FROM blogs ORDER BY created_at DESC LIMIT 5');

        if (result.rows.length === 0) {
            console.log('โ ูุง ุชูุฌุฏ ููุงูุงุช ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช');

            // ุฅุถุงูุฉ ููุงูุงุช ุชุฌุฑูุจูุฉ
            console.log('โ ุฅุถุงูุฉ ููุงูุงุช ุชุฌุฑูุจูุฉ...');

            const sampleBlogs = [
                {
                    title: 'ุฑูุงุฏุฉ ุงูุฃุนูุงู ููุดุจุงุจ: ูู ุงูููุฑุฉ ุฅูู ุงููุดุฑูุน',
                    content: '<h2>ููุฏูุฉ</h2><p>ุฑูุงุฏุฉ ุงูุฃุนูุงู ูู ุทุฑูู ูููุฒ ููุดุจุงุจ ูุชุญููู ุฃุญูุงููู ูุจูุงุก ูุณุชูุจููู. ูู ูุฐุง ุงูููุงู ุณูุชุนุฑู ุนูู ููููุฉ ุชุญููู ุงูุฃููุงุฑ ุฅูู ูุดุงุฑูุน ูุงุฌุญุฉ.</p><h3>ุงูุฎุทูุงุช ุงูุฃุณุงุณูุฉ</h3><ul><li>ุชุญุฏูุฏ ุงูููุฑุฉ</li><li>ุฅุฌุฑุงุก ุฏุฑุงุณุฉ ุงูุฌุฏูู</li><li>ูุถุน ุฎุทุฉ ุงูุนูู</li><li>ุงูุจุญุซ ุนู ุงูุชูููู</li><li>ุชูููุฐ ุงููุดุฑูุน</li></ul><p>ุฑูุงุฏุฉ ุงูุฃุนูุงู ุชุชุทูุจ ุดุฌุงุนุฉ ูุฅุตุฑุงุฑุ ููู ุงููุชุงุฆุฌ ุชุณุชุญู ุงูุฌูุฏ ุงููุจุฐูู.</p>',
                    author: 'ุณุงุฑุฉ ุฃุญูุฏ'
                },
                {
                    title: 'ุงูุตุญุฉ ุงูููุณูุฉ ููุดุจุงุจ: ุฏููู ุดุงูู',
                    content: '<h2>ุฃูููุฉ ุงูุตุญุฉ ุงูููุณูุฉ</h2><p>ุงูุตุญุฉ ุงูููุณูุฉ ูู ุฌุฒุก ุฃุณุงุณู ูู ุงูุตุญุฉ ุงูุนุงูุฉุ ุฎุงุตุฉ ููุดุจุงุจ ุงูุฐูู ููุงุฌููู ุชุญุฏูุงุช ูุชุนุฏุฏุฉ ูู ุญูุงุชูู.</p><h3>ุนูุงูุงุช ุงูุตุญุฉ ุงูููุณูุฉ ุงูุฌูุฏุฉ</h3><ul><li>ุงููุฏุฑุฉ ุนูู ุงูุชุนุงูู ูุน ุงูุชูุชุฑ</li><li>ุงูุญูุงุธ ุนูู ุงูุนูุงูุงุช ุงูุงุฌุชูุงุนูุฉ</li><li>ุงูุดุนูุฑ ุจุงูุฑุถุง ุนู ุงูููุณ</li><li>ุงููุฏุฑุฉ ุนูู ุงูุชุฑููุฒ ูุงูุฅูุชุงุฌูุฉ</li></ul><h3>ูุตุงุฆุญ ููุญูุงุธ ุนูู ุงูุตุญุฉ ุงูููุณูุฉ</h3><p>1. ููุงุฑุณุฉ ุงูุฑูุงุถุฉ ุจุงูุชุธุงู<br/>2. ุงูุญุตูู ุนูู ูุณุท ูุงู ูู ุงูููู<br/>3. ุชูุงูู ุงูุทุนุงู ุงูุตุญู<br/>4. ุงูุญูุงุธ ุนูู ุงูุนูุงูุงุช ุงูุงุฌุชูุงุนูุฉ<br/>5. ุทูุจ ุงููุณุงุนุฏุฉ ุนูุฏ ุงูุญุงุฌุฉ</p>',
                    author: 'ุนูู ูุญูุฏ'
                },
                {
                    title: 'ุงูุชูููููุฌูุง ุงูุญุฏูุซุฉ ูุชุฃุซูุฑูุง ุนูู ุงูุดุจุงุจ',
                    content: '<h2>ุนุตุฑ ุงูุชูููููุฌูุง</h2><p>ูุนูุด ุงูููู ูู ุนุตุฑ ุงูุชูููููุฌูุง ุญูุซ ุชุคุซุฑ ุงูุชูููุงุช ุงูุญุฏูุซุฉ ุนูู ุฌููุน ุฌูุงูุจ ุญูุงุชูุงุ ุฎุงุตุฉ ุญูุงุฉ ุงูุดุจุงุจ.</p><h3>ุงูุฅูุฌุงุจูุงุช</h3><ul><li>ุชุณููู ุงูุชูุงุตู</li><li>ุงููุตูู ูููุนูููุงุช</li><li>ุชุทููุฑ ุงูููุงุฑุงุช</li><li>ูุฑุต ุงูุนูู ุงูุฌุฏูุฏุฉ</li></ul><h3>ุงูุชุญุฏูุงุช</h3><ul><li>ุงูุฅุฏูุงู ุนูู ุงูุฃุฌูุฒุฉ</li><li>ุชุฃุซูุฑ ุนูู ุงูุนูุงูุงุช ุงูุงุฌุชูุงุนูุฉ</li><li>ูุดุงูู ุตุญูุฉ</li><li>ุงูุฎุตูุตูุฉ ูุงูุฃูุงู</li></ul><p>ูุฌุจ ุนูู ุงูุดุจุงุจ ุงูุงุณุชูุงุฏุฉ ูู ุงูุชูููููุฌูุง ุจุญููุฉ ููุนู.</p>',
                    author: 'ูุญูุฏ ุญุณู'
                }
            ];

            for (const blog of sampleBlogs) {
                await query(
                    'INSERT INTO blogs (title, content, author, created_at) VALUES ($1, $2, $3, NOW())',
                    [blog.title, blog.content, blog.author]
                );
                console.log(`โ ุชูุช ุฅุถุงูุฉ: ${blog.title}`);
            }

            console.log('๐ ุชูุช ุฅุถุงูุฉ ุฌููุน ุงูููุงูุงุช ุงูุชุฌุฑูุจูุฉ ุจูุฌุงุญ!');

        } else {
            console.log(`โ ููุฌุฏ ${result.rows.length} ููุงู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช:`);
            result.rows.forEach((blog, index) => {
                console.log(`${index + 1}. ${blog.title} - ${blog.author}`);
                console.log(`   ุงููุญุชูู: ${blog.content ? blog.content.substring(0, 100) + '...' : 'ูุง ููุฌุฏ ูุญุชูู'}`);
                console.log('');
            });
        }

        process.exit(0);
    } catch (error) {
        console.error('โ ุฎุทุฃ:', error);
        process.exit(1);
    }
}

checkAndAddBlogs();
