import { query, run } from './config/database-sqlite.js';

async function setupBlogs() {
    try {
        console.log('๐ง ุจุฏุก ุฅุนุฏุงุฏ ุงููุฏููุฉ...\n');

        // 1. ุฅูุดุงุก ุฌุฏูู ุงููุฏููุฉ
        console.log('1. ุฅูุดุงุก ุฌุฏูู ุงููุฏููุฉ...');
        await run(`
            CREATE TABLE IF NOT EXISTS blogs (
                id INTEGER PRIMARY KEY AUTOINCREMENT,
                title TEXT NOT NULL,
                content TEXT NOT NULL,
                author TEXT,
                image_url TEXT,
                created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
                updated_at DATETIME DEFAULT CURRENT_TIMESTAMP
            )
        `);
        console.log('โ ุชู ุฅูุดุงุก ุฌุฏูู ุงููุฏููุฉ');

        // 2. ุฅุถุงูุฉ ุจูุงูุงุช ุชุฌุฑูุจูุฉ ูููุฏููุฉ
        console.log('\n2. ุฅุถุงูุฉ ุจูุงูุงุช ุชุฌุฑูุจูุฉ ูููุฏููุฉ...');

        const sampleBlogs = [
            {
                title: 'ุฃูููุฉ ุงูุชุทูุน ูู ุงููุฌุชูุน',
                content: 'ุงูุชุทูุน ูู ุฃุญุฏ ุฃูู ุงูุฃูุดุทุฉ ุงูุชู ุชุณุงูู ูู ุจูุงุก ุงููุฌุชูุน ูุชุทููุฑู. ูู ุฎูุงู ุงูุชุทูุนุ ูููู ููุฃูุฑุงุฏ ุงููุณุงููุฉ ูู ุฎุฏูุฉ ุงููุฌุชูุน ูุชุญุณูู ุญูุงุฉ ุงูุขุฎุฑูู. ุงูุชุทูุน ูุณุงุนุฏ ูู ุจูุงุก ุงูุฑูุงุจุท ุงูุงุฌุชูุงุนูุฉ ูุชูููุฉ ุงูุนูุงูุงุช ุจูู ุฃูุฑุงุฏ ุงููุฌุชูุน.',
                author: 'ุฃุญูุฏ ูุญูุฏ',
                image_url: '/images/blog-1.jpg'
            },
            {
                title: 'ุฏูุฑ ุงูุดุจุงุจ ูู ุงูุชูููุฉ ุงููุณุชุฏุงูุฉ',
                content: 'ููุนุจ ุงูุดุจุงุจ ุฏูุฑุงู ูุญูุฑูุงู ูู ุชุญููู ุงูุชูููุฉ ุงููุณุชุฏุงูุฉ. ููู ุงููุงุฏุฉ ุงููุณุชูุจูููู ุงูุฐูู ุณูููุฏูู ุงูุชุบููุฑ ุงูุฅูุฌุงุจู ูู ุงููุฌุชูุน. ูู ุฎูุงู ุงููุจุงุฏุฑุงุช ุงูุดุจุงุจูุฉ ูุงูุงุจุชูุงุฑุ ูููู ุชุญููู ุฃูุฏุงู ุงูุชูููุฉ ุงููุณุชุฏุงูุฉ.',
                author: 'ุณุงุฑุฉ ุนูู',
                image_url: '/images/blog-2.jpg'
            },
            {
                title: 'ุงูุชูููููุฌูุง ูุงูุงุจุชูุงุฑ ูู ุงูุนูู ุงูุฎูุฑู',
                content: 'ุฃุตุจุญุช ุงูุชูููููุฌูุง ุฃุฏุงุฉ ุฃุณุงุณูุฉ ูู ุงูุนูู ุงูุฎูุฑู ูุงูุชุทูุนู. ูู ุฎูุงู ุงุณุชุฎุฏุงู ุงูุชุทุจููุงุช ูุงูููุตุงุช ุงูุฑูููุฉุ ูููู ุชุณููู ุนูููุฉ ุงูุชุทูุน ูุฌุนููุง ุฃูุซุฑ ูุนุงููุฉ ูููุงุกุฉ.',
                author: 'ุนูุฑ ุฎุงูุฏ',
                image_url: '/images/blog-3.jpg'
            },
            {
                title: 'ุจูุงุก ููุงุฑุงุช ุงูููุงุฏุฉ ูู ุฎูุงู ุงูุชุทูุน',
                content: 'ุงูุชุทูุน ูููุฑ ูุฑุตุฉ ููุชุงุฒุฉ ูุจูุงุก ููุงุฑุงุช ุงูููุงุฏุฉ ูุงูุชูุงุตู. ูู ุฎูุงู ุงูุนูู ูุน ูุฑูู ูุชููุนุ ูููู ุชุทููุฑ ููุงุฑุงุช ุญู ุงููุดููุงุช ูุงูุนูู ุงูุฌูุงุนู.',
                author: 'ููุฑ ุญุณู',
                image_url: '/images/blog-4.jpg'
            },
            {
                title: 'ุงูุชุฃุซูุฑ ุงูุฅูุฌุงุจู ููุชุทูุน ุนูู ุงูุตุญุฉ ุงูููุณูุฉ',
                content: 'ุฃุซุจุชุช ุงูุฏุฑุงุณุงุช ุฃู ุงูุชุทูุน ูู ุชุฃุซูุฑ ุฅูุฌุงุจู ุนูู ุงูุตุญุฉ ุงูููุณูุฉ. ูุณุงุนุฏ ูู ุชูููู ุงูุชูุชุฑ ูุงูุงูุชุฆุงุจ ูุฒูุงุฏุฉ ุงูุดุนูุฑ ุจุงูุณุนุงุฏุฉ ูุงูุฑุถุง ุนู ุงูุญูุงุฉ.',
                author: 'ููุณู ุนุจุฏุงููู',
                image_url: '/images/blog-5.jpg'
            }
        ];

        for (const blog of sampleBlogs) {
            await run(`
                INSERT INTO blogs (title, content, author, image_url)
                VALUES (?, ?, ?, ?)
            `, [blog.title, blog.content, blog.author, blog.image_url]);
        }

        console.log(`โ ุชู ุฅุถุงูุฉ ${sampleBlogs.length} ููุงูุฉ ุชุฌุฑูุจูุฉ`);

        // 3. ุงูุชุญูู ูู ุงูุจูุงูุงุช
        console.log('\n3. ุงูุชุญูู ูู ุงูุจูุงูุงุช...');
        const countResult = await query('SELECT COUNT(*) as count FROM blogs');
        console.log(`โ ุนุฏุฏ ุงูููุงูุงุช ูู ุงููุฏููุฉ: ${countResult.rows[0].count}`);

        const blogsResult = await query('SELECT * FROM blogs ORDER BY created_at DESC');
        console.log('๐ ุงูููุงูุงุช ุงููุชุงุญุฉ:');
        blogsResult.rows.forEach((blog, index) => {
            console.log(`   ${index + 1}. ${blog.title} (${blog.author})`);
        });

        console.log('\nโ ุชู ุฅุนุฏุงุฏ ุงููุฏููุฉ ุจูุฌุงุญ!');

    } catch (error) {
        console.error('โ ุฎุทุฃ ูู ุฅุนุฏุงุฏ ุงููุฏููุฉ:', error);
    }
}

setupBlogs();